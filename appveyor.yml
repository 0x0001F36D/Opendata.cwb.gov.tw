image: Visual Studio 2017

before_build:
    - nuget restore

platform:
    # - x86
    # - x64
    - Any CPU

# configuration:
    # - Debug
    # - Release

branches:
    only:
    - master
    
environment:
  token:
    secure: rgzDkmzMohFVnVkgMqrUCg==

install:
  - ps: iex ((New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/appveyor/secure-file/master/install.ps1'))
  - cmd: appveyor-tools\secure-file -decrypt ./misc/.token.enc -secret %token%
  - sh: ./appveyor-tools/secure-file -decrypt ./misc/.token.enc -secret token

deploy:
  provider: NuGet
  server:                  # remove to push to NuGet.org
  api_key:
    secure: +lbM93mJKtN7I6DjKFyYLdmflJH4d3bKLKqBosBJQ1tl7IJTtVBmsPrfbIA40dR4
  skip_symbols: false
  symbol_server:           # remove to push symbols to SymbolSource.org
  artifact: /.*\.nupkg/